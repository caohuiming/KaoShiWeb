var shiti;var data=[];var user=[];var tiku="";var posted=false;var target=1;var timelimit=0;var timestart=new Date().getTime();var recordname="km1";var recordtarget=false;function cookie(e,b){if(b){var d=new Date();d.setTime(d.getTime()+86400*100000);document.cookie=e+"="+escape(b)+";expires="+d.toGMTString()}else{var a,c=new RegExp("(^| )"+e+"=([^;]*)(;|$)");if(a=document.cookie.match(c)){return unescape(a[2])}else{return null}}}function rand(){data.sort(function(){return 0.5-Math.random()})}function parser(){$("#title").html(target+"/"+data.length+"、"+shiti.title);$("#btn5").hide();$("#answer i").hide();$("#answer b").hide();$("#explain").hide();$(".jumpto_count").html("共"+data.length+"题");if(shiti.file==""){$("#file").html("")}else{$("#file").html('<img src="'+shiti.file+'" alt="图片加载中..."  />')}if(shiti.type==0){$("#item1").html('<input name="answer" id="da1" type="radio" value="1" onclick="da(1,true);" /> <label for="da1">正确<div>&nbsp;</div></label>');$("#item2").html('<input name="answer" id="da2" type="radio" value="2" onclick="da(2,true);" /> <label for="da2">错误<div>&nbsp;</div></label>');$("#item3").html("").hide();$("#item4").html("").hide()}if(shiti.type==1){$("#item1").html('<input name="answer" id="da1" type="radio" value="1" onclick="da(1,true);" /> <label for="da1">A、'+shiti.a+"<div>&nbsp;</div></label>");$("#item2").html('<input name="answer" id="da2" type="radio" value="2" onclick="da(2,true);" /> <label for="da2">B、'+shiti.b+"<div>&nbsp;</div></label>");$("#item3").html('<input name="answer" id="da3" type="radio" value="3" onclick="da(3,true);" /> <label for="da3">C、'+shiti.c+"<div>&nbsp;</div></label>").show();$("#item4").html('<input name="answer" id="da4" type="radio" value="4" onclick="da(4,true);" /> <label for="da4">D、'+shiti.d+"<div>&nbsp;</div></label>").show()}if(shiti.type==2){$("#item1").html('<input name="answer" id="da1" type="checkbox" value="1" onclick="da(1);" /> <label for="da1">A、'+shiti.a+"<div>&nbsp;</div></label>");$("#item2").html('<input name="answer" id="da2" type="checkbox" value="2" onclick="da(2);" /> <label for="da2">B、'+shiti.b+"<div>&nbsp;</div></label>");$("#item3").html('<input name="answer" id="da3" type="checkbox" value="3" onclick="da(3);" /> <label for="da3">C、'+shiti.c+"<div>&nbsp;</div></label>").show();$("#item4").html('<input name="answer" id="da4" type="checkbox" value="4" onclick="da(4);" /> <label for="da4">D、'+shiti.d+"<div>&nbsp;</div></label>").show()}advanced()}function loadata(idnum){if(!idnum){target=1}else{target=parseFloat(idnum)}if(target<1){target=1}if(target>data.length){target=data.length}$.get("/data/"+data[target-1]+".txt",function(str){shiti=eval("("+str+")");parser()})}function next(){loadata(target+1)}$("#btnnext").click(function(){next()});function prev(){loadata(target-1)}$("#btnprev").click(function(){prev()});function shunxu(a){if(a){var b=cookie(recordname);var c=/^[1-9]+[0-9]*]*$/;recordtarget=true;if(c.test(b)){if(b>=data.length){if(confirm("您上回已做到最后一题了，是否从新开始？")){loadata(1)}else{loadata(b)}}else{loadata(b)}}else{loadata(1)}}else{loadata(1)}}function suiji(){rand();loadata(1)}function kaoshi(){var a="";for(i=1;i<=data.length;i++){a=a+'<a href="javascript:;" onclick="loadata('+i+');" id="links'+i+'" val="0">'+i+"</a>"}$("#links").html(a);loadata(1);clock()}$("#btn5").click(function(){var a="";for(i=1;i<5;i++){if($("#da"+i).attr("checked")){a=a+$("#da"+i).attr("value")}}da(a,true)});function val2str(a){if(shiti.type==0){if(a==1){a="正确"}else{a="错误"}}if(shiti.type==1){if(a==1){a="A"}if(a==2){a="B"}if(a==3){a="C"}if(a==4){a="D"}}if(shiti.type==2){a=a.replace("1","A");a=a.replace("2","B");a=a.replace("3","C");a=a.replace("4","D")}return a}$("#btnexam").click(function(){post()});$(".goto").click(function(){$(".jumpto").show();$(".jumpto").css("left",($(window).width()-$(".jumpto").width())/2);$(".jumpto").css("top","10px");$(".jumpto_num").val("")});$(".jumpto_btn").click(function(){$(".jumpto").hide();if($(".jumpto_num").val()){loadata($(".jumpto_num").val())}});$(".jumpto_close").click(function(){$(".jumpto").hide()});$("#autonext").click(function(){if($("#autonext").attr("checked")){cookie("auto","true")}else{cookie("auto","")}});if(cookie("auto")=="true"){$("#autonext").attr("checked",true)}document.addEventListener("WeixinJSBridgeReady",function onBridgeReady(){WeixinJSBridge.call("hideToolbar")});
